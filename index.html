<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>FATMA STORE > Toko Baju Online</title>
  <style>
    body { font-family: sans-serif; background: #f4f4f4; margin: 0; padding: 0; }
    header, footer { background: #333; color: #fff; text-align: center; padding: 15px; }
    .product-container { display: flex; justify-content: center; flex-wrap: wrap; padding: 20px; }
    .product { background: #fff; margin: 10px; padding: 15px; border-radius: 8px; width: 200px; text-align: center; }
    .product img { width: 100%; }
    .product button { background: green; color: #fff; border: none; padding: 10px; cursor: pointer; }
    #formModal { display: none; position: fixed; top: 0; left: 0; background: rgba(0,0,0,0.7); width: 100%; height: 100%; align-items: center; justify-content: center; }
    #formModal form { background: white; padding: 20px; border-radius: 10px; width: 300px; }
  </style>
</head>
<body>
  <header>
    <h1>Toko Baju Online</h1>
  </header>

  <div class="product-container">
    <div class="product">
      <img src="https://via.placeholder.com/200x250" alt="Baju A">
      <h3>Baju Kemeja</h3>
      <p>Rp150.000</p>
      <button onclick="openForm('Baju Kemeja')">Beli Sekarang</button>
    </div>
  </div>

  <div id="formModal">
    <form id="checkoutForm">
      <h3>Form Checkout</h3>
      <input type="hidden" name="product_name" id="product_name">
      <input type="text" name="customer_name" placeholder="Nama" required><br><br>
      <input type="text" name="phone" placeholder="No WhatsApp (tanpa +)" required><br><br>
      <textarea name="address" placeholder="Alamat" required></textarea><br><br>
      <button type="submit">Kirim</button>
      <button type="button" onclick="closeForm()">Batal</button>
    </form>
  </div>

  <footer>
    &copy; 2025 Toko Baju Online
  </footer>

  <script>
    function openForm(product) {
      document.getElementById('formModal').style.display = 'flex';
      document.getElementById('product_name').value = product;
    }
    function closeForm() {
      document.getElementById('formModal').style.display = 'none';
    }

    document.getElementById('checkoutForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData.entries());

      const res = await fetch('/checkout', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const text = await res.text();
      alert(text);
      closeForm();
    });
  </script>
</body>
</html>
